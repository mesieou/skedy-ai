import type { CreateAvailabilitySlotData } from '../../types/availability-slots';

// Helper function to get date in business timezone
function getDateInTimezone(daysFromNow: number, timezone: string = 'Australia/Melbourne'): string {
  const date = new Date();
  date.setDate(date.getDate() + daysFromNow);
  
  // Format as ISO string but set time to start of day in the timezone
  const localDate = new Date(date.toLocaleString('en-US', { timeZone: timezone }));
  localDate.setHours(0, 0, 0, 0);
  
  return localDate.toISOString();
}

// Generate availability slots data dynamically
export function generateAvailabilitySlotData(
  daysFromNow: number,
  businessId: string,
  timezone: string = 'Australia/Melbourne'
): CreateAvailabilitySlotData {
  const baseSlots = {
    "60": [["07:00", 2], ["08:00", 2], ["09:00", 2], ["10:00", 2], ["11:00", 2], ["12:00", 2], ["13:00", 2], ["14:00", 2], ["15:00", 2], ["16:00", 2]],
    "90": [["07:00", 2], ["08:00", 2], ["09:00", 2], ["10:00", 2], ["11:00", 2], ["12:00", 2], ["13:00", 2], ["14:00", 2], ["15:00", 2]],
    "120": [["07:00", 2], ["08:00", 2], ["09:00", 2], ["10:00", 2], ["11:00", 2], ["12:00", 2], ["13:00", 2], ["14:00", 2]],
    "150": [["07:00", 2], ["08:00", 2], ["09:00", 2], ["10:00", 2], ["11:00", 2], ["12:00", 2], ["13:00", 2]],
    "180": [["07:00", 2], ["08:00", 2], ["09:00", 2], ["10:00", 2], ["11:00", 2], ["12:00", 2], ["13:00", 2]],
    "240": [["07:00", 1], ["08:00", 1], ["09:00", 1], ["10:00", 1], ["11:00", 1], ["12:00", 1]],
    "300": [["07:00", 1], ["08:00", 1], ["09:00", 1], ["10:00", 1], ["11:00", 1]],
    "360": [["07:00", 1], ["08:00", 1], ["09:00", 1], ["10:00", 1]]
  };

  return {
    date: getDateInTimezone(daysFromNow, timezone),
    slots: baseSlots,
    business_id: businessId
  };
}

// Static data for seeding - using dynamic dates
export const tomorrowAvailabilityData: CreateAvailabilitySlotData = {
  date: getDateInTimezone(1), // Tomorrow
  slots: {
    "60": [["07:00", 2], ["08:00", 2], ["09:00", 2], ["10:00", 2], ["11:00", 2], ["12:00", 2], ["13:00", 2], ["14:00", 2], ["15:00", 2], ["16:00", 2]],
    "90": [["07:00", 2], ["08:00", 2], ["09:00", 2], ["10:00", 2], ["11:00", 2], ["12:00", 2], ["13:00", 2], ["14:00", 2], ["15:00", 2]],
    "120": [["07:00", 2], ["08:00", 2], ["09:00", 2], ["10:00", 2], ["11:00", 2], ["12:00", 2], ["13:00", 2], ["14:00", 2]],
    "150": [["07:00", 2], ["08:00", 2], ["09:00", 2], ["10:00", 2], ["11:00", 2], ["12:00", 2], ["13:00", 2]],
    "180": [["07:00", 2], ["08:00", 2], ["09:00", 2], ["10:00", 2], ["11:00", 2], ["12:00", 2], ["13:00", 2]],
    "240": [["07:00", 1], ["08:00", 1], ["09:00", 1], ["10:00", 1], ["11:00", 1], ["12:00", 1]],
    "300": [["07:00", 1], ["08:00", 1], ["09:00", 1], ["10:00", 1], ["11:00", 1]],
    "360": [["07:00", 1], ["08:00", 1], ["09:00", 1], ["10:00", 1]]
  },
  business_id: "placeholder-business-id"
};

export const dayAfterTomorrowAvailabilityData: CreateAvailabilitySlotData = {
  date: getDateInTimezone(2), // Day after tomorrow
  slots: {
    "60": [["07:00", 3], ["08:00", 3], ["09:00", 3], ["10:00", 3], ["11:00", 3], ["12:00", 3], ["13:00", 3], ["14:00", 3], ["15:00", 3], ["16:00", 3]],
    "90": [["07:00", 3], ["08:00", 3], ["09:00", 3], ["10:00", 3], ["11:00", 3], ["12:00", 3], ["13:00", 3], ["14:00", 3], ["15:00", 3]],
    "120": [["07:00", 3], ["08:00", 3], ["09:00", 3], ["10:00", 3], ["11:00", 3], ["12:00", 3], ["13:00", 3], ["14:00", 3]],
    "150": [["07:00", 3], ["08:00", 3], ["09:00", 3], ["10:00", 3], ["11:00", 3], ["12:00", 3], ["13:00", 3]],
    "180": [["07:00", 3], ["08:00", 3], ["09:00", 3], ["10:00", 3], ["11:00", 3], ["12:00", 3], ["13:00", 3]],
    "240": [["07:00", 2], ["08:00", 2], ["09:00", 2], ["10:00", 2], ["11:00", 2], ["12:00", 2]],
    "300": [["07:00", 2], ["08:00", 2], ["09:00", 2], ["10:00", 2], ["11:00", 2]],
    "360": [["07:00", 2], ["08:00", 2], ["09:00", 2], ["10:00", 2]]
  },
  business_id: "placeholder-business-id"
};
